<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link href="../css/dpl.css" rel="stylesheet" type="text/css"/>
    <link href="../css/bui.css" rel="stylesheet" type="text/css"/>
    <link href="../css/main.css" rel="stylesheet" type="text/css"/>
    <link href="../css/page.css" rel="stylesheet" type="text/css"/>
    <link href="../css/theme-01.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container">
    <div class="title-bar">
        <div id="tab">

        </div>
    </div>
    <div class="content-top">
        <div id="tab1"></div>
    </div>
    <div class="content-body">
        <div id="grid"></div>
    </div>

    <div id="Content" class="hide">
        <div class="round-title">
            会员等级：
            <label class="radio">
                <input type="radio" name="active" value="0"/>所有会员
            </label>
            &nbsp;&nbsp;
            <label class="radio">
                <input type="radio" name="active" value="1" />金卡会员
            </label>
            &nbsp;&nbsp;
            <label class="radio">
                <input type="radio" name="active" value="2" />注册会员
            </label>
        </div>
        <div class="round-title">
            会员注册时间：
            <input type="text" class="calendar control-text">
            <span class="mr5">至</span>
            <input type="text" class="calendar control-text">
        </div>
        <div class="area-list">
            <div class="item">
                <div class="hd">
                    <label class="checkbox" for="chk1"><input type="checkbox" id="chk1"/>全国</label>
                </div>
                <div class="bd">
                    <ul>
                        <li><label class="checkbox" for="chk1_1"><input type="checkbox" id="chk1_1"/>北京</label></li>
                        <li><label class="checkbox" for="chk1_2"><input type="checkbox" id="chk1_2"/>天津<em>(20)</em><i class="x-caret x-caret-down"></i></label>
                            <div class="area-droplist">
                                <label class="checkbox" for="chk1_2_1"><input type="checkbox" id="chk1_2_1"/>南昌</label>
                                <label class="checkbox" for="chk1_2_2"><input type="checkbox" id="chk1_2_2"/>上饶</label>
                                <label class="checkbox" for="chk1_2_3"><input type="checkbox" id="chk1_2_3"/>抚州</label>
                                <label class="checkbox" for="chk1_2_4"><input type="checkbox" id="chk1_2_4"/>湖南</label>
                                <label class="checkbox" for="chk1_2_5"><input type="checkbox" id="chk1_2_5"/>鹰潭</label>
                                <label class="checkbox" for="chk1_2_6"><input type="checkbox" id="chk1_2_6"/>赣州</label>
                                <label class="checkbox" for="chk1_2_7"><input type="checkbox" id="chk1_2_7"/>九江</label>
                                <label class="checkbox" for="chk1_2_8"><input type="checkbox" id="chk1_2_8"/>宜春</label>
                                <label class="checkbox" for="chk1_2_9"><input type="checkbox" id="chk1_2_9"/>景德镇</label>
                            </div>
                        </li>
                        <li><label class="checkbox" for="chk1_3"><input type="checkbox" id="chk1_3"/>河北</label></li>
                        <li><label class="checkbox" for="chk1_5"><input type="checkbox" id="chk1_5"/>内蒙<i class="x-caret x-caret-down"></i></label>
                            <div class="area-droplist">
                                <label class="checkbox" for="chk1_2_1"><input type="checkbox" id="chk3_2_1"/>南昌</label>
                                <label class="checkbox" for="chk1_2_2"><input type="checkbox" id="chk3_2_2"/>上饶</label>
                                <label class="checkbox" for="chk1_2_3"><input type="checkbox" id="chk3_2_3"/>抚州</label>
                                <label class="checkbox" for="chk1_2_4"><input type="checkbox" id="chk3_2_4"/>湖南</label>
                                <label class="checkbox" for="chk1_2_5"><input type="checkbox" id="chk3_2_5"/>鹰潭</label>
                                <label class="checkbox" for="chk1_2_6"><input type="checkbox" id="chk3_2_6"/>赣州</label>
                                <label class="checkbox" for="chk1_2_7"><input type="checkbox" id="chk3_2_7"/>九江</label>
                                <label class="checkbox" for="chk1_2_8"><input type="checkbox" id="chk3_2_8"/>宜春</label>
                                <label class="checkbox" for="chk1_2_9"><input type="checkbox" id="chk3_2_9"/>景德镇</label>
                            </div>
                        </li>
                        <li><label class="checkbox" for="chk1_4"><input type="checkbox" id="chk1_4"/>山西</label></li>
                        <li><label class="checkbox" for="chk1_6"><input type="checkbox" id="chk1_6"/>山东</label></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="../js/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="../js/bui.js"></script>
<script type="text/javascript" src="../js/config.js"></script>
<script type="text/javascript" src="../js/admin.js"></script>
<script type="text/javascript">
    var Tab = BUI.Tab;
    var tab = new Tab.Tab({
        render : '#tab',
        elCls : 'nav-tabs',
        autoRender: true,
        children:[
            {text:'优惠券列表',value:'1'},
            {text:'优惠券使用明细',value:'2'}
        ]
    });
    tab.on('selectedchange',function (ev) {
        var item = ev.item;
        $('#log').text(item.get('text') + ' ' + item.get('value'));
    });
    tab.setSelected(tab.getItemAt(0));

    var tab2 = new Tab.Tab({
        render : '#tab1',
        elCls : 'link-tabs',
        autoRender: true,
        children:[
            {text:'有效',value:'1',href:'javascript:void(0)'},
            {text:'过期',value:'2',href:'javascript:void(0)'},
            {text:'禁用',value:'3',href:'javascript:void(0)'}
        ],
        itemTpl : '<a href="{href}">{text}</a>'
    });
    tab2.setSelected(tab2.getItemAt(0));


    var Grid = BUI.Grid,
            Toolbar = BUI.Toolbar,
            Data = BUI.Data;
    var Grid = Grid,
            Store = Data.Store,
            columns = [{
                title : '编号',
                dataIndex :'a',
                width:80
            },{
                title : '名称',
                dataIndex :'b',
                width:150
            },{
                title : '描述',
                dataIndex : 'c',
                width:200
            },{
                title : '数量',
                dataIndex : 'd',
                width:100
            },{
                title : '领取数量',
                dataIndex : 'e',
                width:100
            },{
                title : '已使用数量',
                dataIndex : 'f',
                width:100
            },{
                title : '使用起始时间',
                dataIndex : 'g',
                width:150
            },{
                title : '使用结束时间',
                dataIndex : 'h',
                width:150
            },{
                title : '领取地址',
                dataIndex : 'i',
                width:150
            },{
                title : '状态',
                dataIndex : 'j',
                width:100
            },{
                title : '操作',
                dataIndex : 'k',
                width:150
            }],
            data = [{a:'123123123123123123123123123123123123123123123123123123123123123123123',k:'<a href="#">编辑</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void(0);" onclick="region();">发放</a>'}];

    var store = new Store({
                data : data,
                autoLoad:true,
                pageSize:'20'
            }),
            grid = new Grid.Grid({
                width: '100%',
                height: getContentHeight(),
                render:'#grid',
                columns : columns,
                // 顶部工具栏
                tbar:{
                    // items:工具栏的项， 可以是按钮(bar-item-button)、 文本(bar-item-text)、 默认(bar-item)、 分隔符(bar-item-separator)以及自定义项
                    items:[{
                        //xclass:'bar-item-button',默认的是按钮
                        btnCls : 'button button-small',
                        text:'新增优惠券',
                        handler:addFunction
                    }]
                },
                // 底部工具栏
                bbar:{
                    // pagingBar:表明包含分页栏
                    pagingBar:true
                },
                store : store
            });
    grid.render();

    function addFunction(){
        app.page.open({
            href:'main/add_coupons.html'
        });
    }

    BUI.use('bui/overlay',function(Overlay){

        $(".area-list .bd li").each(function(){
            var li = $(this),
                    labelbox = li.find(".checkbox").eq(0),
                    droplist = li.find(".area-droplist");
            if(droplist[0]){
                li.hover(function(){
                    labelbox.addClass("current");
                    droplist.show();
                },function(){
                    labelbox.removeClass("current");
                    droplist.hide();
                })
            }
        });

        dialogregion = new Overlay.Dialog({
            title:'发放',
            width:680,
            height:400,
            mask:true,
            buttons:[
                {
                    text:'确定',
                    elCls : 'button button-primary',
                    handler : function(){
                        this.close();
                    }
                },{
                    text:'取消',
                    elCls : 'button',
                    handler : function(){
                        this.close();
                    }
                }
            ],
            contentId : 'Content'
        });
    });

    BUI.use('bui/calendar',function(Calendar){
        var datepicker = new Calendar.DatePicker({
            trigger:'.calendar',
            //delegateTrigger : true, //如果设置此参数，那么新增加的.calendar元素也会支持日历选择
            autoRender : true,
            align :{
                node: 'trigger',     // 参考元素, falsy 或 window 为可视区域, 'trigger' 为触发元素, 其他为指定元素
                points: ['tl','tl'], // ['tr', 'tl'] 表示 overlay 的 tl 与参考节点的 tr 对齐
                offset: [0, 30]    // 有效值为 [n, m]
            }
        });
    });
    function region(){
        dialogregion.show();
    }
</script>
</body>
</html>  