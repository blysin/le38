<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link href="../css/dpl.css" rel="stylesheet" type="text/css"/>
    <link href="../css/bui.css" rel="stylesheet" type="text/css"/>
    <link href="../css/main.css" rel="stylesheet" type="text/css"/>
    <link href="../css/page.css" rel="stylesheet" type="text/css"/>
    <link href="../css/theme-01.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container">
    <div class="title-bar">
        <div id="tab">

        </div>
    </div>
    <div class="content-body">
        <div id="grid"></div>
    </div>

</div>
<script type="text/javascript" src="../js/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="../js/bui.js"></script>
<script type="text/javascript" src="../js/config.js"></script>
<script type="text/javascript" src="../js/admin.js"></script>
<script type="text/javascript">
    var Tab = BUI.Tab;
    var tab = new Tab.Tab({
        render : '#tab',
        elCls : 'nav-tabs',
        autoRender: true,
        children:[
            {text:'会员等级管理',value:'1'}
        ]
    });
    tab.on('selectedchange',function (ev) {
        var item = ev.item;
        $('#log').text(item.get('text') + ' ' + item.get('value'));
    });
    tab.setSelected(tab.getItemAt(0));

    var Grid = BUI.Grid,
        Toolbar = BUI.Toolbar,
        Data = BUI.Data;
    var Grid = Grid,
        Store = Data.Store,
        columns = [{
            title : '启用',
            dataIndex :'a',
            width:40
        },{
            title : '会员等级',
            dataIndex :'b',
            width:100
        }],
        data = [
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'一级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'二级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'三级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'四级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'五级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'六级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'七级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'八级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'九级会员'},
            {a:'<input name="" type="checkbox" value="" class="mt5"/>',b:'十级会员'},
        ];

    var store = new Store({
            data : data,
            autoLoad:true
        }),
        grid = new Grid.Grid({
            width: '100%',
            height: getContentHeight(),
            render:'#grid',
            columns : columns,
            store : store
        });

    var privilegebox = $('<div class="privilege-listbox">' +
            '<div class="title">一级会员设置</div>' +
            '<form class="form-horizontal" method="post">' +
            '<div class="form-content">' +
            '<div class="row">'+
                '<div class="control-group">' +
                    '<label class="control-label">业务名称：</label>'+
                    '<div class="controls"><input value="请输入要等级名称" name="name" class="input-large control-text"><input type="checkbox">自动升级</div>' +
                '</div>'+
            '</div>'+

            '<div class="row mb10">'+
                '<div class="control-group">' +
                    '<label class="control-label">业务名称：</label>'+
                    '<div class="controls control-row-auto"><div class="w80">交易额达</div><input value="" name="name" class="input-small control-text">元<br><div class="w80">或交易次数</div><input value="" name="name" class="input-small control-text">次<br><div class="w80">或一次性充值</div><input value="" name="name" class="input-small control-text">元</div>'+
                '</div>'+
            '</div>'+

            '<div class="row">'+
                '<div class="control-group">' +
                    '<label class="control-label">享受折扣：</label>'+
                    '<div class="controls"><input value="" name="name" class="input-small control-text">元</div>' +
                '</div>'+
            '</div>'+

            '<div class="row mb10">'+
                '<div class="control-group">' +
                    '<label class="control-label">会员卡：</label>'+
                    '<div class="controls control-row-auto">' +
                        '<div class="members-cardbox">' +
                            '<div class="members-card"><img src="../images/members-card.jpg" width="132" /></div>' +
                            '<div class="members-card-btn">更改<input type="file" class="inp-file"></div>'+
                        '</div>'+
                    '</div>' +
                '</div>'+
            '</div>'+

            '<div class="row">'+
                '<div class="control-group">' +
                    '<label class="control-label">会员权益：</label>'+
                    '<div class="controls control-row-auto"><textarea name="description" class="control-row4 input-large bui-form-field"></textarea></div>' +
                '</div>'+
            '</div>'+

            '</div>' +
            '</form>' +
            '</div>' +
            '<div class="privilege-listbox-ft">' +
            '<button class="button button-primary">保存</button>' +
            '</div>');

    var overlay = new BUI.Overlay.Overlay({
        elCls : 'privilege-overlay',
        content : privilegebox,
        align : {
            node : '#grid .bui-grid-header-container',
            points : ['tr','tr']
        }, //对齐方式
        autoHide : true //点击overlay外面，overlay 会自动隐藏
    });

    grid.on("selectedchange",function(e){
        overlay.set('height',$('#grid .bui-grid-header-container').height() + $('#grid .bui-grid-body').height());
        overlay.show();
    });

    grid.render();
    grid.setSelected(grid.getItemAt(0));
</script>
</body>
</html>  