<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link href="../css/dpl.css" rel="stylesheet" type="text/css"/>
    <link href="../css/bui.css" rel="stylesheet" type="text/css"/>
    <link href="../css/main.css" rel="stylesheet" type="text/css"/>
    <link href="../css/page.css" rel="stylesheet" type="text/css"/>
    <link href="../css/theme-01.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div class="container">
    <div class="title-bar">
        <div id="tab">

        </div>
    </div>
    <div class="content-top">
        <form class="form-horizontal search-form mb0" method="get">
            <div class="row mb10">
                <div class="control-group">
                    <div class="controls  control-row-auto ml0">
                        <input type="text" class="calendar control-text">
                        <span class="mr5">至</span>
                        <input type="text" class="calendar control-text">
                        <button class="button button-primary">导出</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="content-body">
        <div class="title-bar-side">
            <div class="search-bar">
                <form>
                    <input class="control-text" type="text" placeholder="检索条件"/>
                    <button></button>
                </form>
            </div>
            <div class="search-content">
                <form id="searchForm" class="form-horizontal search-form">
                    <div class="row">
                        <div class="control-group span8">
                            <label class="control-label">优惠券编码：</label>
                            <div class="controls">
                                <input type="text" name="a" class="control-text">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="control-group span8">
                            <label class="control-label">使用者手机号：</label>
                            <div class="controls">
                                <input type="text" name="b" class="control-text">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="control-group span8">
                            <label class="control-label">使用订单号：</label>
                            <div class="controls">
                                <input type="text" name="c" class="control-text">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-actions offset3">
                            <button id="btnSearch" type="submit" class="button button-primary">搜索</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div id="grid"></div>
    </div>

</div>
<script type="text/javascript" src="../js/jquery-1.8.1.min.js"></script>
<script type="text/javascript" src="../js/bui.js"></script>
<script type="text/javascript" src="../js/config.js"></script>
<script type="text/javascript" src="../js/admin.js"></script>
<script type="text/javascript">
    var Tab = BUI.Tab;
    var tab = new Tab.Tab({
        render : '#tab',
        elCls : 'nav-tabs',
        autoRender: true,
        children:[
            {text:'优惠券列表',value:'1'},
            {text:'优惠券使用明细',value:'2'}
        ]
    });
    tab.on('selectedchange',function (ev) {
        var item = ev.item;
        $('#log').text(item.get('text') + ' ' + item.get('value'));
    });
    tab.setSelected(tab.getItemAt(1));

    var Grid = BUI.Grid,
            Toolbar = BUI.Toolbar,
            Data = BUI.Data;
    var Grid = Grid,
            Store = Data.Store,
            columns = [{
                title : '优惠券编码',
                dataIndex :'a',
                width:100
            },{
                title : '优惠券名称',
                dataIndex :'b',
                width:150
            },{
                title : '优惠券面额',
                dataIndex : 'c',
                width:100
            },{
                title : '实际使用优惠金额',
                dataIndex : 'd',
                width:100
            },{
                title : '使用时间',
                dataIndex : 'e',
                width:150
            },{
                title : '使用者手机号',
                dataIndex : 'f',
                width:100
            },{
                title : '使用订单号',
                dataIndex : 'g',
                width:150
            }],
            data = [{a:'123123123'}];

    var store = new Store({
                data : data,
                autoLoad:true,
                pageSize:'20'
            }),
            grid = new Grid.Grid({
                width: '100%',
                height: getContentHeight(),
                render:'#grid',
                columns : columns,
                // 底部工具栏
                bbar:{
                    // pagingBar:表明包含分页栏
                    pagingBar:true
                },
                store : store
            });
    grid.render();


    var mask;
    $('.title-bar-side .search-bar input').on('focus',function(){
        var $this = $(this);
        var searchCon = $this.closest('.title-bar-side').find('.search-content');
        $this.addClass("focused");
        if(!mask)
            mask = $('<div></div>').css({
                'position':'absolute',
                'left':0,
                'top':0,
                'width':'100%',
                'height':'100%'
            }).appendTo(document.body);
        searchCon.show(400);
        mask.on('click',function(){
            $this.removeClass("focused");
            mask.remove();
            mask = null;
            searchCon.hide(400);
        });
    });
</script>
</body>
</html>  