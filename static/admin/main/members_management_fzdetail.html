<!DOCTYPE HTML>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link href="../css/dpl.css" rel="stylesheet" type="text/css"/>
    <link href="../css/bui.css" rel="stylesheet" type="text/css"/>
    <link href="../css/main.css" rel="stylesheet" type="text/css"/>
    <link href="../css/page.css" rel="stylesheet" type="text/css"/>
    <link href="../css/theme-01.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="../js/jquery-1.8.1.min.js"></script>
    <script type="text/javascript" src="../js/bui.js"></script>
    <script type="text/javascript" src="../js/config.js"></script>
    <script type="text/javascript" src="../js/admin.js"></script>
</head>
<body>
<div class="container">
    <div class="title-bar">
        <div class="title-text">会员信息</div>
        <div class="userinfo-box">
            <div class="pic"><img src="../images/userhead.jpg"  width="100" height="100"></div>
            <div class="code"><img src="../images/code.jpg"  width="100" height="100"></div>
            <div class="title">会员名XXXXX<span>注册会员</span></div>
            <ul>
                <li>姓名：张章章</li>
                <li>注册时间：2016-03-15 15:45</li>
                <li>会员发展数：500</li>
                <li>手机号：15300000000</li>
                <li>会员等级：注册会员</li>
                <li>会员发展返利总额：5899.57</li>
                <li>会员卡号：15300000000</li>
                <li>会员类型：员工</li>
                <li>会员发展积分：100</li>
            </ul>
        </div>
        <div id="tab"></div>
    </div>

    <div id="content">
        <div id="left" class="side-menu">
            <ul id="zTree" class="ztree"></ul>
            <link href="../js/ztree/3.5.12/css/zTreeStyle/zTreeStyle.min.css" rel="stylesheet" type="text/css"/>
            <script type="text/javascript" src="../js/ztree/3.5.12/js/jquery.ztree.core-3.5.min.js"></script>
            <script type="text/javascript" src="../js/ztree/3.5.12/js/jquery.ztree.exhide-3.5.min.js"></script>
            <script type="text/javascript">
                var key, lastValue = "", nodeList = [];
                var treeObj;
                var allNodes;

                var setting = {
                    data: {
                        simpleData: {
                            enable: true
                        }
                    },
                    view :{
                        showIcon: false,
                        fontCss: getFontCss
                    }
                };
                var zNodes =[
                    {
                        id:0
                        ,pId:-1
                        ,name:"全部"
                        ,target:"rightFrameForCustomerChildren"
                        ,url:""
                        ,open:true
                    }

                    ,{
                        id:1
                        ,pId:0
                        ,name:"1级会员"
                        ,target:"rightFrameForCustomerChildren"
                        ,url:""
                        ,open:true
                    }
                    ,{
                        id:2
                        ,pId:0
                        ,name:"2级会员"
                        ,target:"rightFrameForCustomerChildren"
                        ,url:""
                        ,open:true
                    }
                    ,{
                        id:3
                        ,pId:0
                        ,name:"3级会员"
                        ,target:"rightFrameForCustomerChildren"
                        ,url:""
                        ,open:true
                    }
                    ,{
                        id:4
                        ,pId:0
                        ,name:"4级会员"
                        ,target:"rightFrameForCustomerChildren"
                        ,url:""
                        ,open:true
                    }

                ];

                $(document).ready(function(){
                    treeObj=$.fn.zTree.init($("#zTree"), setting, zNodes);
                    allNodes = treeObj.transformToArray(treeObj.getNodes());
                });

                function showIconForTree(treeId, treeNode) {
                    return !treeNode.isParent;
                };

                function getFontCss(treeId, treeNode) {
                    return (!!treeNode.highlight) ? {color:"#A60000", "font-weight":"bold"} : {color:"#333", "font-weight":"normal"};
                }

            </script>
        </div>
        <div id="right" class="main-content">
            <div class="content-top">
                <form class="form-horizontal search-form mb0" method="get">
                    <div class="row">
                        <div class="control-group control-row-auto">
                            <div class="controls ml0">
                                <input type="text" class="calendar control-text">
                                <span class="mr5">至</span>
                                <input type="text" class="calendar control-text">
                                <button class="button button-primary ml">搜索</button>
                                <button class="button ml">导出</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="content-body">
                <div id="grid"></div>
            </div>
        </div>
    </div>
</div>
</body>

<script type="text/javascript">
    $(function(){
        resetHeight();
    })
    function resetHeight(){
        var h = $(window).height() - ($('.title-bar').outerHeight() || 0) - ($('.bui-grid-bbar').outerHeight() || 0);
        $('.side-menu').height(h - 2);
    }
    $(window).on('resize',resetHeight);
    BUI.use('common/page');
    var Tab = BUI.Tab;
    var tab = new Tab.Tab({
        render : '#tab',
        elCls : 'nav-tabs',
        autoRender: true,
        children:[
            {text:'基本信息',value:'1'},
            {text:'购酒券明细',value:'2'},
            {text:'积分明细',value:'3'},
            {text:'红包明细',value:'4'},
            {text:'发展会员明细',value:'5'},
            {text:'支付密码修改',value:'6'}
        ]
    });
    tab.on('selectedchange',function (ev) {
        var item = ev.item;
        $('#log').text(item.get('text') + ' ' + item.get('value'));
    });
    tab.setSelected(tab.getItemAt(4));

    var Grid = BUI.Grid,
        Data = BUI.Data;
    var Grid = Grid,
            Store = Data.Store,
            columns = [{
                title : '用户姓名',
                dataIndex :'a',
                width:200
            },{
                title : '手机号',
                dataIndex :'b',
                width:200
            },{
                title : '会员类型',
                dataIndex : 'c',
                width:100
            },{
                title : '会员等级',
                dataIndex : 'd',
                width:100
            },{
                title : '注册时间',
                dataIndex : 'e',
                width:100
            },{
                title : '是否是微店主',
                dataIndex : 'f',
                width:100
            },{
                title : '返利金额',
                dataIndex : 'g',
                width:100
            },{
                title : '获得积分',
                dataIndex : 'h',
                width:100
            }],
            data = [
                {a:'2016-03-15 15：45'}
            ];

    var store = new Store({
                data : data,
                autoLoad:true,
                pageSize:'20'
            }),
            grid = new Grid.Grid({
                width: '100%',
                height: getContentHeight(),
                render:'#grid',
                columns : columns,
                // 底部工具栏
                bbar:{
                    // pagingBar:表明包含分页栏
                    pagingBar:true
                },
                store : store
            });
    grid.render();

    BUI.use('bui/calendar',function(Calendar){
        var datepicker = new Calendar.DatePicker({
            trigger:'.calendar',
            //delegateTrigger : true, //如果设置此参数，那么新增加的.calendar元素也会支持日历选择
            autoRender : true,
            align :{
                node: 'trigger',     // 参考元素, falsy 或 window 为可视区域, 'trigger' 为触发元素, 其他为指定元素
                points: ['tl','tl'], // ['tr', 'tl'] 表示 overlay 的 tl 与参考节点的 tr 对齐
                offset: [0, 30]    // 有效值为 [n, m]
            }
        });
    });
</script>
</body>
</html>  